<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Inertia</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="site.desc">
<meta property="og:type" content="website">
<meta property="og:title" content="Inertia">
<meta property="og:url" content="http://nberserk.github.io/page/8/index.html">
<meta property="og:site_name" content="Inertia">
<meta property="og:description" content="site.desc">
<meta property="og:locale" content="ko_KR">
<meta property="article:author" content="@nberserk">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Inertia" type="application/atom+xml">
  
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" integrity="sha384-XdYbMnZ/QjLh6iI4ogqCTaIjrFk87ip+ekIjefZch0Y+PvJ8CDYtEs1ipDmPorQ+" crossorigin="anonymous">

  
<link rel="stylesheet" href="/css/styles.css">

  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-63706532-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <nav class="navbar navbar-inverse">
  <div class="container">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#main-menu-navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="main-menu-navbar">
      <ul class="nav navbar-nav">
        
          <li><a class=""
                 href="/index.html">Home</a></li>
        
          <li><a class=""
                 href="/archives/">Archives</a></li>
        
      </ul>

      <!--
      <ul class="nav navbar-nav navbar-right">
        
          <li><a href="/atom.xml" title="RSS Feed"><i class="fa fa-rss"></i></a></li>
        
      </ul>
      -->
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>

  <div class="container">
    <div class="blog-header">
  <h1 class="blog-title">Inertia</h1>
  
</div>

    <div class="row">
        <div class="col-sm-8 blog-main">
          
  
    <article id="post-topologicalsort" class="article article-type-post" itemscope itemprop="blogPost">

  <header class="article-header">
    
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/11/08/topologicalsort/">toplogical sort</a>
    </h1>
  


  </header>

  <div class="article-meta">
    <div class="article-datetime">
  <a href="/2016/11/08/topologicalsort/" class="article-date"><time datetime="2016-11-08T15:00:00.000Z" itemprop="datePublished">2016-11-09</time></a>
</div>

    
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/algorithm/">algorithm</a>
  </div>


  </div>
  <div class="article-inner">

    <div class="article-entry" itemprop="articleBody">
      
        <p>아래 처럼 모든 unvisited node를 돌면서 <code>topologicalSort</code>를 불러주는 방법이 있는가 하면, 각 노드로 들어가는 edge를 수를 트래킹하면서(indegree map) 트래버스할 수 도 있다.</p>
<h2 id="using-incoming-edge"><a href="#using-incoming-edge" class="headerlink" title="using incoming edge"></a>using incoming edge</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1 -&gt; 2</span><br><span class="line">3 -&gt; 2 -&gt; 5</span><br></pre></td></tr></table></figure>
<p>위와 같은 그래프가 있다고 치자.. 그럼 각노드의 incoming edge수를 세어보면 이렇게 된다.<br>1: 0<br>3: 0<br>2: 2<br>5: 1</p>
<p>incoming edge가 0라는 말은 아무 prerequisite이 없으니 이 노드부터 traverse할 수 있다는 얘기니까 1/3번 노드를 가장먼저 진행하고 1/3번을 제거하면 2의 incoming edge는 0가 된다. 그러니 2를 진행할 수 있고 2가 없어지면 5의 incoming edge가 0가 되어서 5도 없앨 수 있다. 이렇게 topological sort가 되는 것이다.  </p>
<h2 id="using-dfs"><a href="#using-dfs" class="headerlink" title="using dfs"></a>using dfs</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">topologicalSort</span><span class="params">(<span class="keyword">int</span>[][] map,<span class="keyword">int</span>[] visited, <span class="keyword">int</span> here, List&lt;Integer&gt; path )</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(visited[here] == <span class="number">2</span>) returnt <span class="keyword">true</span>; <span class="comment">// if visited return</span></span><br><span class="line">    <span class="keyword">if</span> (visited[here] == <span class="number">1</span>) <span class="keyword">return</span> <span class="keyword">false</span>; <span class="comment">// detect cycle</span></span><br><span class="line"></span><br><span class="line">    visited[here] = <span class="number">1</span>; <span class="comment">// open</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; map[here].length; i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(map[here][i]==<span class="number">1</span>)</span><br><span class="line">            topologicalSort(map, visited, i, path);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    visited[here] = <span class="number">2</span>; <span class="comment">// close</span></span><br><span class="line">    path.add(here);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="detect-cycle"><a href="#detect-cycle" class="headerlink" title="detect cycle"></a>detect cycle</h2><p>cycle의 경우, directed graph는 visited의 state(1:open, 2:close)까지 봐야 하는 반면, undirectional graph의 경우는 visited의 여부만 보면 된다. 즉 visited에 node에 들어가면 바로 cycle이라고 판정하면 된다. </p>
<h2 id="Problems"><a href="#Problems" class="headerlink" title="Problems"></a>Problems</h2><p>알고리즘 이해가 되었다면 아래 문제들 풀어보시길.</p>
<ul>
<li><a href="https://leetcode.com/problems/course-schedule/" target="_blank" rel="noopener">course schedule</a> : 기본.</li>
<li><a href="https://leetcode.com/problems/alien-dictionary/" target="_blank" rel="noopener">alien dictionary @leetcode</a> : 코너 케이스가 많으니 정신 바짝 차리고.</li>
<li><a href="https://leetcode.com/problems/sequence-reconstruction/" target="_blank" rel="noopener">sequence reconstruction @leetcode</a> : 응용</li>
<li><a href="https://leetcode.com/problems/parallel-courses/" target="_blank" rel="noopener">https://leetcode.com/problems/parallel-courses/</a></li>
<li><a href="https://leetcode.com/problems/parallel-courses-ii/" target="_blank" rel="noopener">https://leetcode.com/problems/parallel-courses-ii/</a></li>
<li></li>
</ul>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="http://www.geeksforgeeks.org/topological-sorting/" target="_blank" rel="noopener">explanation @geeks</a></li>
</ul>

      
    </div>

    
      

    

    <footer class="article-footer">
      <a data-url="http://nberserk.github.io/2016/11/08/topologicalsort/" data-id="ckqe4m422000urcqyrzxrjzpu" class="article-share-link">
        <i class="fa fa-share"></i> Share
      </a>
      
        <a href="http://nberserk.github.io/2016/11/08/topologicalsort/#disqus_thread" class="article-comment-link">
          <i class="fa fa-comment"></i> Comments
        </a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/algorithm/" rel="tag">algorithm</a></li></ul>


    </footer>
  </div>
  
</article>



  
    <article id="post-slidingwindowmax" class="article article-type-post" itemscope itemprop="blogPost">

  <header class="article-header">
    
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/11/07/slidingwindowmax/">sliding window maximum/minimum</a>
    </h1>
  


  </header>

  <div class="article-meta">
    <div class="article-datetime">
  <a href="/2016/11/07/slidingwindowmax/" class="article-date"><time datetime="2016-11-07T15:00:00.000Z" itemprop="datePublished">2016-11-08</time></a>
</div>

    
    

  </div>
  <div class="article-inner">

    <div class="article-entry" itemprop="articleBody">
      
        <p>Given array [A<sub>0</sub>,A<sub>1</sub>, - ,A<sub>n</sub> ], sliding window of size k which is moving from the very left of the array to the very right. find max/min of each sliding window.</p>
<h2 id="naive"><a href="#naive" class="headerlink" title="naive"></a>naive</h2><p>O(NK) 로 가능.</p>
<h2 id="using-priority-queue"><a href="#using-priority-queue" class="headerlink" title="using priority_queue"></a>using priority_queue</h2><p>슬라이딩 윈도우의 값들을 TreeSet으로 오더를 유지해주면 O(Nlog(K)) 정도로 풀 수 있다. O(logK)는 추가 및 삭제에 걸리는 시간</p>
<h2 id="linear"><a href="#linear" class="headerlink" title="linear"></a>linear</h2><p>O(N)도 가능!</p>
<p>intuition:</p>
<ul>
<li>윈도우 안의 값이 추가될때, 기존 최대보다 크다면 기존 것은 버리고 새로운 값이 최대가 된다. 그러므로 자연스럽게 내림차순 정렬이 된다!</li>
<li>값이 삭제될때, 최대값이 삭제되면 그 다음 값이 최대값이 된다.</li>
</ul>
<p>구현 :</p>
<ul>
<li>window안의 값을 deque로 관리하는데 head에는 최소 값, tail에는 최대값이 들어가게 관리. </li>
<li>whenever add a[i], <code>while(a[i]&gt;head)</code> 이면 head 삭제. 윈도우의 값보다 작은 값들은 모두 버린다. 왜 그럴까? (버려지는 값들은 a[i]가 있는한 최대값이 될 수 없으므로).</li>
<li>그럼 sliding window가 범위를 벗어날때, 삭제는 어떻게 하면 될까? deque를 돌면서 지우면 될까? 그렇게 하면 O(N)을 만족할 수 없고, 우리는 tail값만 사용할 것이므로 tail이 현재 window에 있는지만 보면 된다. 따라서, 각 스텝마다 윈도우를 벗어나면 지우면 된다.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">int</span>[] maxSlidingWindow(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> k) &#123;</span><br><span class="line">       <span class="keyword">int</span> N = nums.length;</span><br><span class="line">       <span class="keyword">int</span> R = N-k+<span class="number">1</span>;</span><br><span class="line">       <span class="keyword">if</span>(R&lt;=<span class="number">0</span>) <span class="keyword">return</span> <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;&#125;;</span><br><span class="line">       <span class="keyword">int</span>[] ret = <span class="keyword">new</span> <span class="keyword">int</span>[R];</span><br><span class="line">       LinkedList&lt;Integer&gt; deque = <span class="keyword">new</span> LinkedList&lt;&gt;(); <span class="comment">//first:min, last:max</span></span><br><span class="line"></span><br><span class="line">       <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++) &#123;</span><br><span class="line">           <span class="keyword">int</span> start = i-k+<span class="number">1</span>;</span><br><span class="line">           <span class="keyword">int</span> end = i;</span><br><span class="line"></span><br><span class="line">           <span class="keyword">while</span>(!deque.isEmpty()&amp;&amp; deque.peekLast()&lt;start)</span><br><span class="line">               deque.removeLast();</span><br><span class="line"></span><br><span class="line">           <span class="keyword">while</span>(!deque.isEmpty() &amp;&amp; nums[deque.peekFirst()] &lt;= nums[end] )</span><br><span class="line">               deque.removeFirst();</span><br><span class="line">           deque.addFirst(end);</span><br><span class="line"></span><br><span class="line">           <span class="keyword">if</span>(start&gt;=<span class="number">0</span>)</span><br><span class="line">               ret[start] = nums[deque.peekLast()];</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">return</span> ret;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<h2 id="Problems"><a href="#Problems" class="headerlink" title="Problems"></a>Problems</h2><p>이해가 되었다면 아래 문제들을 풀어보자.</p>
<ul>
<li><a href="https://leetcode.com/problems/sliding-window-maximum/" target="_blank" rel="noopener">Sliding Window Maximum @leetcode</a></li>
<li>응용 문제, <a href="https://leetcode.com/problems/shortest-subarray-with-sum-at-least-k/description/" target="_blank" rel="noopener">Shortest subarray with sum at least K</a></li>
</ul>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://abitofcs.blogspot.kr/2014/11/data-structure-sliding-window-minimum.html" target="_blank" rel="noopener">explanation</a></li>
<li><a href="https://github.com/nberserk/codejam/blob/4cd0ba731762f9f65151bc656a53474f4d519501/java/src/main/java/crackcode/queue/SlidingWindowMaximum.java" target="_blank" rel="noopener">My implemetation &amp; test cases</a></li>
</ul>
<h2 id="History"><a href="#History" class="headerlink" title="History"></a>History</h2><ul>
<li>2018.07.03 , 응용문제 추가 </li>
</ul>

      
    </div>

    
      

    

    <footer class="article-footer">
      <a data-url="http://nberserk.github.io/2016/11/07/slidingwindowmax/" data-id="ckqe4m421000srcqynz1299sc" class="article-share-link">
        <i class="fa fa-share"></i> Share
      </a>
      
        <a href="http://nberserk.github.io/2016/11/07/slidingwindowmax/#disqus_thread" class="article-comment-link">
          <i class="fa fa-comment"></i> Comments
        </a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/algorithm/" rel="tag">algorithm</a></li></ul>


    </footer>
  </div>
  
</article>



  
    <article id="post-kadane" class="article article-type-post" itemscope itemprop="blogPost">

  <header class="article-header">
    
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/11/04/kadane/">kadane algorithm, maximum sum subarray</a>
    </h1>
  


  </header>

  <div class="article-meta">
    <div class="article-datetime">
  <a href="/2016/11/04/kadane/" class="article-date"><time datetime="2016-11-04T15:00:00.000Z" itemprop="datePublished">2016-11-05</time></a>
</div>

    
    

  </div>
  <div class="article-inner">

    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Kadane"><a href="#Kadane" class="headerlink" title="Kadane"></a>Kadane</h1><blockquote>
<p>find the max sum of contiguous subarray of given array.<br><code>-1, -2, 3, 4, -5, 6</code></p>
</blockquote>
<p>위의 경우 {3,4,-5,6} = 8이 된다.</p>
<h2 id="naive"><a href="#naive" class="headerlink" title="naive"></a>naive</h2><p>start, end index를 정해서 for loop 2번 하면 구할 수 있음. O(n^2)</p>
<h2 id="dp"><a href="#dp" class="headerlink" title="dp"></a>dp</h2><p>dp[i] -&gt; index i 에서 끝나는 subarray 중에서 쵀대값. 이라고 정의 하면</p>
<p>dp[i] = max(dp[i - 1] + a[i], a[i]). 증명은 a[i]가 음수,양수 나누어서 해보면 증명할 수 있음.</p>
<p>time complexity는 O(N)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>[] dp = <span class="keyword">new</span> <span class="keyword">int</span>[N];</span><br><span class="line">dp[<span class="number">0</span>]=a[<span class="number">0</span>];</span><br><span class="line">max_sum=a[<span class="number">0</span>];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;N;i++)&#123;</span><br><span class="line">	dp[i]=Math.max(dp[i-<span class="number">1</span>]+a[i], a[i]);</span><br><span class="line">	max_sum=Math.max(max_sum, dp[i]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>이때, memory optimization을 할 수 있다. dp[i]는 항상 dp[i-1]과 디펜던시가 있으니, 그 전단계를 가지고 있으면 O(N) 메모리를 O(1)으로 절약할 수 있다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cur_max =a[<span class="number">0</span>];</span><br><span class="line">max_sum=a[<span class="number">0</span>];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;N;i++)&#123;</span><br><span class="line">	cur_max=Math.max(cur_max+a[i], a[i]);</span><br><span class="line">	max_sum=Math.max(max_sum, dp[i]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="응용"><a href="#응용" class="headerlink" title="응용"></a>응용</h1><p>위의 문제를 약간만 바꿔서 K보다 작으면서 가장 큰 값을 찾으라는 문제로 바뀌었다.</p>
<blockquote>
<p>Given an array of integers A and an integer k, find a subarray that contains the largest sum, subject to a constraint that the sum is less than k?</p>
</blockquote>
<h2 id="intuition"><a href="#intuition" class="headerlink" title="intuition"></a>intuition</h2><p>안타깝게도 위의 제약조건이 들어가면 dp방식으로는 풀수 없다. 그리고 값을 비교해야 하기 때문에 sort가 필요하다. 그러면 O(longN)의 complexity가 붙겠지.</p>
<p>range sum은 보통 array의 처음부터 cumulative sum을 해서 <code>cum[j]-cum[i] where i&lt;j</code> 을 해주면 구할 수 있다. </p>
<p>여기서 더 발전시키면, 왼쪽에서 부터 cum[j]를 TreeSet에 추가하기 전에, 트리에 이미있는 값들은 소트가 되어 있으므로 트리에 있는 값중 최적의 갑을 찾아낼 수 있다. 아래에서 <code>cum[j],k</code>는 상수 이므로 TreeSet의 값중에서 <a href="https://www.tutorialspoint.com/java/util/treeset_ceiling.htm" target="_blank" rel="noopener">ceiling</a> 를 찾으면 된다.</p>
<blockquote>
<p>cum[j]-cum[i]&lt;=k, where i<j -=""> cum[i]&gt;=cum[j]-k</j></p>
</blockquote>
<h2 id="implementation"><a href="#implementation" class="headerlink" title="implementation"></a>implementation</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">maxSumLessThanK</span><span class="params">(<span class="keyword">int</span>[] a, <span class="keyword">int</span> k)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> ret=Integer.MIN_VALUE;</span><br><span class="line">    <span class="keyword">int</span> sum=<span class="number">0</span>;</span><br><span class="line">    TreeSet&lt;Integer&gt; set = <span class="keyword">new</span> TreeSet&lt;&gt;();</span><br><span class="line">    set.add(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++)&#123;</span><br><span class="line">        sum+=nums[i];</span><br><span class="line">        <span class="keyword">int</span> min = set.ceiling(sum-k);</span><br><span class="line">        ret=Math.max(ret, min);        </span><br><span class="line">        set.add(sum);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Problems"><a href="#Problems" class="headerlink" title="Problems"></a>Problems</h2><p>알고리즘 이해가 되었다면 아래 문제들 풀어보시길.</p>
<ul>
<li><a href="https://leetcode.com/problems/maximum-subarray/" target="_blank" rel="noopener">maximum subarray @leetcode</a></li>
<li><p><a href="http://www.geeksforgeeks.org/maximum-absolute-difference-between-sum-of-two-contiguous-sub-arrays/" target="_blank" rel="noopener">maximum absolute difference between sum of two contiguous subarrays @geeks</a> : Kadane 응용</p>
</li>
<li><p><a href="https://leetcode.com/problems/count-of-range-sum/" target="_blank" rel="noopener">count of range sum @leetcode</a> </p>
</li>
</ul>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="http://www.geeksforgeeks.org/largest-sum-contiguous-subarray/" target="_blank" rel="noopener">explanation @geeks</a></li>
</ul>

      
    </div>

    
      

    

    <footer class="article-footer">
      <a data-url="http://nberserk.github.io/2016/11/04/kadane/" data-id="ckqe4m41z000qrcqy8imzydcn" class="article-share-link">
        <i class="fa fa-share"></i> Share
      </a>
      
        <a href="http://nberserk.github.io/2016/11/04/kadane/#disqus_thread" class="article-comment-link">
          <i class="fa fa-comment"></i> Comments
        </a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/algorithm/" rel="tag">algorithm</a></li></ul>


    </footer>
  </div>
  
</article>



  
    <article id="post-pregel" class="article article-type-post" itemscope itemprop="blogPost">

  <header class="article-header">
    
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/11/01/pregel/">(no title)</a>
    </h1>
  


  </header>

  <div class="article-meta">
    <div class="article-datetime">
  <a href="/2016/11/01/pregel/" class="article-date"><time datetime="2016-11-01T15:00:00.000Z" itemprop="datePublished">2016-11-02</time></a>
</div>

    
    

  </div>
  <div class="article-inner">

    <div class="article-entry" itemprop="articleBody">
      
        <p>BSP(Bulk Synchronous parallel) model<br>sequence of iterations, called superstep</p>

      
    </div>

    
      

    

    <footer class="article-footer">
      <a data-url="http://nberserk.github.io/2016/11/01/pregel/" data-id="ckqe4m420000rrcqycsqui7cz" class="article-share-link">
        <i class="fa fa-share"></i> Share
      </a>
      
        <a href="http://nberserk.github.io/2016/11/01/pregel/#disqus_thread" class="article-comment-link">
          <i class="fa fa-comment"></i> Comments
        </a>
      
      

    </footer>
  </div>
  
</article>



  
    <article id="post-running-arm-docker-image-on-x86" class="article article-type-post" itemscope itemprop="blogPost">

  <header class="article-header">
    
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/07/15/running-arm-docker-image-on-x86/">running arm dockerimage on x86</a>
    </h1>
  


  </header>

  <div class="article-meta">
    <div class="article-datetime">
  <a href="/2016/07/15/running-arm-docker-image-on-x86/" class="article-date"><time datetime="2016-07-15T15:00:00.000Z" itemprop="datePublished">2016-07-16</time></a>
</div>

    
    

  </div>
  <div class="article-inner">

    <div class="article-entry" itemprop="articleBody">
      
        <p>docker v1.12 버전 부터는 container에 qemu가 설치만 되어 있으면 Mac(x86)에서 arm docker image를 실행할 수 있다.</p>
<p>좋구나.<br>이전에는 qemu-arm-static trick을 사용했어야 했다. <a href="https://resin.io/blog/building-arm-containers-on-any-x86-machine-even-dockerhub/" target="_blank" rel="noopener">https://resin.io/blog/building-arm-containers-on-any-x86-machine-even-dockerhub/</a> 참고.<br><a href="https://docs.docker.com/docker-for-mac/multi-arch/" target="_blank" rel="noopener">https://docs.docker.com/docker-for-mac/multi-arch/</a></p>

      
    </div>

    
      

    

    <footer class="article-footer">
      <a data-url="http://nberserk.github.io/2016/07/15/running-arm-docker-image-on-x86/" data-id="ckqe4m41y000orcqylg6cwmnd" class="article-share-link">
        <i class="fa fa-share"></i> Share
      </a>
      
        <a href="http://nberserk.github.io/2016/07/15/running-arm-docker-image-on-x86/#disqus_thread" class="article-comment-link">
          <i class="fa fa-comment"></i> Comments
        </a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/docker/" rel="tag">docker</a></li></ul>


    </footer>
  </div>
  
</article>



  
    <article id="post-arm-hadoop-docker" class="article article-type-post" itemscope itemprop="blogPost">

  <header class="article-header">
    
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/06/27/arm-hadoop-docker/">Hadoop cluster docker for ARM</a>
    </h1>
  


  </header>

  <div class="article-meta">
    <div class="article-datetime">
  <a href="/2016/06/27/arm-hadoop-docker/" class="article-date"><time datetime="2016-06-27T15:00:00.000Z" itemprop="datePublished">2016-06-28</time></a>
</div>

    
    

  </div>
  <div class="article-inner">

    <div class="article-entry" itemprop="articleBody">
      
        <p>ARM architecture에 hadoop cluster docker image를 만들어 보았다.</p>
<p>docker hub의 armv7/armhf-ubuntu_core:15.10  이미지를 기반으로 Dockerize를 시도.</p>
<p>크게 3개의 이미지를 만들 것</p>
<ul>
<li>hadoop-base</li>
<li>hadoop-slave</li>
<li>hadoop-master</li>
</ul>
<h2 id="hadoop-base-image"><a href="#hadoop-base-image" class="headerlink" title="hadoop-base image"></a>hadoop-base image</h2><p>hadoop-base 에서는 slave와 master에서 공통적으로 사용할 것들을 설정</p>
<ul>
<li>install java, openssh server</li>
<li>qemu-arm-static. 이것은 아래에서 설명</li>
<li>passwordless ssh</li>
<li>install hadoop</li>
</ul>
<h4 id="qemu-arm-static"><a href="#qemu-arm-static" class="headerlink" title="qemu-arm-static"></a>qemu-arm-static</h4><p>qemu를 사용해서 x86 머신에서 docker를 빌드/테스트 하는 이유는 아래 2가지 이유 때문.</p>
<ol>
<li>arm device가 잘 없다는 것. raspberry pi 정도?</li>
<li>arm device는 대게 x86 desktop 보다 느리니까</li>
</ol>
<p>그래서 구글링 하다가 <a href="https://resin.io/blog/building-arm-containers-on-any-x86-machine-even-dockerhub/" target="_blank" rel="noopener">qemu를 이용해서 하는 방법</a>을 찾아서 따라해 보니 잘 동작한다. 원리는 모든 커맨드 바로 앞에 <code>qemu-arm-static</code>을 붙여서 arm instruction을 x86으로 변환해 주는 것 되겠다.</p>
<h2 id="install-packages"><a href="#install-packages" class="headerlink" title="install packages"></a>install packages</h2><p>java, ssh server, vim 등을 설치해 준다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RUN apt-get update &amp;&amp; apt-get install -y openjdk-7-jdk openssh-server openssh-client rsync vim</span><br></pre></td></tr></table></figure>
<h2 id="passwordless-ssh"><a href="#passwordless-ssh" class="headerlink" title="passwordless ssh"></a>passwordless ssh</h2><p>hadoop cluster를 구성하려면 cluster간 passwordless ssh가 구성이 되어야 한다. 그것을 위해서</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># sshd setting</span><br><span class="line">RUN ssh-keygen -t rsa -f /root/.ssh/id_rsa -P &apos;&apos;</span><br><span class="line">RUN cat /root/.ssh/id_rsa.pub &gt;&gt; /root/.ssh/authorized_keys</span><br><span class="line">ADD config /root/.ssh/</span><br><span class="line">RUN chmod 600 /root/.ssh/config</span><br><span class="line">#RUN chown root:root /root/.ssh/config</span><br><span class="line">RUN echo &apos;root:sheepdog&apos; | chpasswd</span><br><span class="line">RUN sed -i &apos;s/PermitRootLogin without-password/PermitRootLogin yes/&apos; /etc/ssh/sshd_config</span><br><span class="line">RUN echo &quot;UsePAM no&quot; &gt;&gt; /etc/ssh/sshd_config</span><br><span class="line">RUN echo &quot;Port 2122&quot; &gt;&gt; /etc/ssh/sshd_config</span><br></pre></td></tr></table></figure>
<h2 id="reference"><a href="#reference" class="headerlink" title="reference"></a>reference</h2><ul>
<li><a href="https://github.com/nberserk/armhf-hadoop-multinode" target="_blank" rel="noopener">my hadoop arm multinode project @github</a></li>
<li><a href="https://github.com/alvinhenrick/hadoop-mutinode" target="_blank" rel="noopener">hadoop multinode</a> : serf를 이용해서 host name resolution을 하는듯. 설정을 하려면 slave의 host name 혹은 ip를 알아야 하는데 이것 설정도 꽤 귀찮은 일. serf!</li>
</ul>
<h2 id="revision-history"><a href="#revision-history" class="headerlink" title="revision history"></a>revision history</h2><ul>
<li>2016-6-28 draft</li>
</ul>

      
    </div>

    
      

    

    <footer class="article-footer">
      <a data-url="http://nberserk.github.io/2016/06/27/arm-hadoop-docker/" data-id="ckqe4m41w000nrcqyaf0qxn6o" class="article-share-link">
        <i class="fa fa-share"></i> Share
      </a>
      
        <a href="http://nberserk.github.io/2016/06/27/arm-hadoop-docker/#disqus_thread" class="article-comment-link">
          <i class="fa fa-comment"></i> Comments
        </a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/docker/" rel="tag">docker</a></li></ul>


    </footer>
  </div>
  
</article>



  
    <article id="post-django" class="article article-type-post" itemscope itemprop="blogPost">

  <header class="article-header">
    
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/04/14/django/">django</a>
    </h1>
  


  </header>

  <div class="article-meta">
    <div class="article-datetime">
  <a href="/2016/04/14/django/" class="article-date"><time datetime="2016-04-14T15:00:00.000Z" itemprop="datePublished">2016-04-15</time></a>
</div>

    
    

  </div>
  <div class="article-inner">

    <div class="article-entry" itemprop="articleBody">
      
        <p>Spring, Django, Ruby on Rails 등등 수많은 웹 프레임워크가 있다. 이 중 내가 이번에 선택한 것은 django이다. 그 이유는</p>
<ul>
<li>admin 이 그냥 생기고(model을 정의만 하면…)</li>
<li>python 에 비교적 익숙하고</li>
<li>community가 발달되어서 3rd party app(django에서의 앱은 하나의 동자적인 기능을 하는 모듈이라고 보면 된다)이 많이 있다. Oauth2 authentication이라든가, markdown editor라든지…</li>
</ul>
<p>MVC에서, M은 Model, V는 View(Template) C는 urls.py가 담당하게 된다.</p>
<h2 id="Model"><a href="#Model" class="headerlink" title="Model"></a>Model</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Problem</span><span class="params">(models.Model)</span>:</span></span><br><span class="line">    problem = models.CharField(max_length=<span class="number">200</span>)</span><br><span class="line">    pub_date = modesl.DateTimeField(<span class="string">'date published'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__unicode__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.problem</span><br><span class="line"></span><br><span class="line"><span class="comment"># create new isntance &amp; save to DB</span></span><br><span class="line">new_instance = Problem(problem=<span class="string">'which one is better?'</span>)</span><br><span class="line">new_instance.save()</span><br></pre></td></tr></table></figure>
<h2 id="Controller"><a href="#Controller" class="headerlink" title="Controller"></a>Controller</h2><p>urls.py를 request url을 regex로 각 뷰로 dispatch한다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">urlpatterns = [</span><br><span class="line">    url(<span class="string">r'^$'</span>, views.IndexView.as_view(), name=<span class="string">'index'</span>),</span><br><span class="line">    url(<span class="string">r'^(?P&lt;pk&gt;[0-9]+)/$'</span>, views.DetailView.as_view(), name=<span class="string">'detail'</span>),</span><br><span class="line">    url(<span class="string">r'^(?P&lt;pk&gt;[0-9]+)/results/$'</span>, views.ResultsView.as_view(), name=<span class="string">'results'</span>),</span><br><span class="line">    url(<span class="string">r'^(?P&lt;question_id&gt;[0-9]+)/vote/$'</span>, views.vote, name=<span class="string">'vote'</span>),</span><br><span class="line">    ]</span><br></pre></td></tr></table></figure>
<h2 id="View-Template"><a href="#View-Template" class="headerlink" title="View(Template)"></a>View(Template)</h2><p>우리가 서버로 사용하는 것은 Django이고 실제로 웹사이트의 사용자가 보게 되는 것은 html이다. 그러면 django object를 html로 변환하는 과정이 필요하게 마련인데, 이것을 해주는 것이 template 되겠다.</p>
<p>object는 handle bar형식으로 표현이 되고, 그 외의 것은 <code> {% tag %} </code>로 표현이 된다. 아래의 예제에서 extends, block, for, endfor, endblock 등이 되겠다.</p>
<p>신선했던 것은 template도 상속관계를 가질수 있다는 것. 그래서 전체적인 구조(block)는 base.html에서 잡아두고, override 하고 싶은 부분만 extends해서 커스터마이징 할 수 있다. 실제로도 아주 편한 피쳐임.</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#123;% raw %&#125;</span><br><span class="line">&#123;% extends "base_generic.html" %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block title %&#125;&#123;&#123; section.title &#125;&#125;&#123;% endblock %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block content %&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;&#123; section.title &#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"></span><br><span class="line">&#123;% for story in story_list %&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"&#123;&#123; story.get_absolute_url &#125;&#125;"</span>&gt;</span></span><br><span class="line">    &#123;&#123; story.headline|upper &#125;&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; story.tease|truncatewords:"100" &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">&#123;% endfor %&#125;</span><br><span class="line">&#123;% endblock %&#125;</span><br><span class="line">&#123;% endraw %&#125;</span><br></pre></td></tr></table></figure>
<h2 id="revision-history"><a href="#revision-history" class="headerlink" title="revision history"></a>revision history</h2><ul>
<li>2016-4-15 draft</li>
<li>2016-5-10 controller, view 업데이트</li>
</ul>

      
    </div>

    
      

    

    <footer class="article-footer">
      <a data-url="http://nberserk.github.io/2016/04/14/django/" data-id="ckqe4m41w000mrcqyb06raney" class="article-share-link">
        <i class="fa fa-share"></i> Share
      </a>
      
        <a href="http://nberserk.github.io/2016/04/14/django/#disqus_thread" class="article-comment-link">
          <i class="fa fa-comment"></i> Comments
        </a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/django/" rel="tag">django</a></li></ul>


    </footer>
  </div>
  
</article>



  
    <article id="post-docker" class="article article-type-post" itemscope itemprop="blogPost">

  <header class="article-header">
    
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/02/docker/">docker</a>
    </h1>
  


  </header>

  <div class="article-meta">
    <div class="article-datetime">
  <a href="/2016/03/02/docker/" class="article-date"><time datetime="2016-03-02T15:00:00.000Z" itemprop="datePublished">2016-03-03</time></a>
</div>

    
    

  </div>
  <div class="article-inner">

    <div class="article-entry" itemprop="articleBody">
      
        <p>최근에 docker를 사용해볼 기회가 있어서 몇가지 컨셉 도움이 되는 것들을 정리해 보기로 한다. docker이전엔 virtual machine(VM)이 있었고 이것으로 많이 사용했지만 VM의 문제는 무겁다는 것. 그래서 light하게 에뮬레이션 할 수 있게 docker가 나오기 시작함. 개발환경/서버환경 설정등으로 사용하면 좋은 use case가 됨.</p>
<h2 id="image-vs-container"><a href="#image-vs-container" class="headerlink" title="image vs container"></a>image vs container</h2><p>처음 헷갈린 것은 image와 container의 관계. image는 read-only이고 container는 image를 기반으로 실행되고 있는 것을 의미함. class와 instance의 관계라고 하면 적당한 비유가 될 것 같다.</p>
<table>
<thead>
<tr>
<th>name</th>
<th>image</th>
<th>conatiner</th>
</tr>
</thead>
<tbody>
<tr>
<td>list</td>
<td>docker images</td>
<td>docker ps</td>
</tr>
</tbody>
</table>
<h2 id="build"><a href="#build" class="headerlink" title="build"></a>build</h2><p>docker image 를 빌드하려면 <a href="https://docs.docker.com/engine/reference/builder/" target="_blank" rel="noopener">Dockerfile</a>을 작성하면 되는데, 이 파일은 일련의 명령들을 순차적으로 실행해서 내가 원하는 이미지를 만드는 형식이다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># build using current directory's Dockerfile</span></span><br><span class="line">docker build .</span><br><span class="line">docker build -t myimage:latest . <span class="comment"># set tag as myimage:latest</span></span><br></pre></td></tr></table></figure>
<h2 id="run"><a href="#run" class="headerlink" title="run"></a>run</h2><blockquote>
<p>docker run <options> <image> <command></image></options></p>
</blockquote>
<ul>
<li>-p host_port:container_port : port forwarding</li>
<li>-v host_volume:container_volumen : volume mapping</li>
<li>-it : open tty interactive shell</li>
<li>–net=host : host network을 그대로 사용하게 함. 즉, expose된 모든 port들은 외부에서 접근가능하게 됨. default는 port forwarding을 해줘야만 접근이 가능함.</li>
<li>-e : env va를 다커로 넘겨주는 명령. 환경변수가 많을 경우 <code>--env-file env.list</code> 옵션을 사용할 수 있음.</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># run nginx docker image with 8000 port</span></span><br><span class="line">docker run -it -p 8000:80 nginx</span><br><span class="line">docker run -d -e POSTGRES_ENV_POSTGRES_PASSWORD=<span class="string">'foo'</span> nginx</span><br><span class="line">docker run --env-file ./env.list ubuntu bash</span><br></pre></td></tr></table></figure>
<h2 id="exec"><a href="#exec" class="headerlink" title="exec"></a>exec</h2><blockquote>
<p> docker exec -it nginx bash</p>
</blockquote>
<p>run과 기본적으로 같지만, 이미 실행되어 있는 container에서 실행하는 명령이다. 즉, 이미 실행되어 있는 웹서버의 bash shell로 들어가서 뭔가 확인해야 할것이 있다면 아래처럼 명령을 실행하면 된다.</p>
<h2 id="delete-images"><a href="#delete-images" class="headerlink" title="delete images"></a>delete images</h2><p>간혹 여러개 이미지를 지워야 할 일이 있는데 아래 커멘드로 한방에 훅. 그러나 다른 것 지우지 않게 조심해야 함.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker images | grep 810001cb03af | awk <span class="string">'&#123;print $3&#125;'</span> | xargs docker rmi</span><br></pre></td></tr></table></figure>
<h2 id="push-images"><a href="#push-images" class="headerlink" title="push images"></a>push images</h2><p>만들어진 docker image를 docker hub에 push하면 나중에 재사용할 수 있기 때문에 빌드 시간을 줄 일 수 있다. 그 전에 중요한 것은 image의 이름이 <code>&lt;dockerhub_id&gt;/&lt;image_name&gt;</code>의 형식으로 되어 있어야 한다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ docker images</span><br><span class="line">REPOSITORY           TAG          IMAGE ID            CREATED             VIRTUAL SIZE</span><br><span class="line">docker-whale         latest       7d9495d03763        38 minutes ago      273.7 MB</span><br><span class="line"><span class="comment"># change docker tag</span></span><br><span class="line">docker tag 7d9495d03763 nberserk/docker-whale:latest</span><br><span class="line"><span class="comment">#login to docker hub</span></span><br><span class="line">docker login --username=yourhubusername --email=youremail@company.com</span><br><span class="line"><span class="comment"># push image</span></span><br><span class="line">docker push nberserk/docker-whale</span><br></pre></td></tr></table></figure>
<h2 id="Dockerfile"><a href="#Dockerfile" class="headerlink" title="Dockerfile"></a>Dockerfile</h2><h3 id="add"><a href="#add" class="headerlink" title="add"></a>add</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># local 의 dev directory를 container의 /code/dev 로 recursive copy를 하고 싶다면 아래처럼.</span></span><br><span class="line"><span class="comment"># 만약 `add dev /code` 로 주면 dev dir의 파일을 /code로 카피한다. 왜 이렇게 헷갈리게 동작을 정의 했을까..</span></span><br><span class="line">add dev /code/dev</span><br></pre></td></tr></table></figure>
<h3 id="copy"><a href="#copy" class="headerlink" title="copy"></a>copy</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">COPY dist/. /usr/share/nginx/html/      # copy files under dist folder</span><br><span class="line">COPY dist  /usr/share/nginx/html/       # copy dist directory to html folder</span><br></pre></td></tr></table></figure>
<p>위의 예 처럼 폴더안에 든 파일만 카피를 하고 싶다면 <code>&lt;folder&gt;/.</code> 이런식으로 기술해 주면 된다. </p>
<h3 id="CMD-vs-ENTRYPOINT"><a href="#CMD-vs-ENTRYPOINT" class="headerlink" title="CMD vs ENTRYPOINT"></a>CMD vs ENTRYPOINT</h3><p>ENTRYPOINT는 디폴트로 실행하는 포인트이고 디폴트는 <code>sh -c</code> 이다. CMD는 이 ENTRYPOINT의 parameter가 된다. 자세한 것은 <a href="https://docs.docker.com/engine/reference/builder/#understand-how-cmd-and-entrypoint-interact" target="_blank" rel="noopener">여기</a>를 참고.</p>
<p>ENTRYPOINT를 내가 만든 shell로 대체해서 커스텀화 할 수 있다. docker-entrypoint.sh로 돌리고 CMD로 디폴트로 실행될 파람을 받고 등등..</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/bin/bash -e</span></span><br><span class="line">/usr/<span class="built_in">local</span>/bin/uwsgi --ini /django/deploy/uwsgi.ini &amp;</span><br><span class="line">./manage.py migrate</span><br><span class="line"><span class="built_in">exec</span> <span class="string">"<span class="variable">$@</span>"</span></span><br></pre></td></tr></table></figure>
<p>위는 django server를 띄우고, 또 optional하게 들어오는 커맨드를 실행하는 스크립트이다. 이런식으로 사용하면 된다.</p>
<h2 id="Docker-machine에-insecure-registry-영구적으로-추가하기"><a href="#Docker-machine에-insecure-registry-영구적으로-추가하기" class="headerlink" title="Docker-machine에 insecure registry 영구적으로 추가하기"></a>Docker-machine에 insecure registry 영구적으로 추가하기</h2><p>private docker registry 설정시, Ubuntu의 경우는 /etc/default/docker 에 아래처럼 추가해주면 되고</p>
<blockquote>
<p>DOCKER_OPTS=”–insecure-registry &lt;your_registry_ip&gt;:5000”</p>
</blockquote>
<p>맥의 경우는,  <code>docker-machine ssh</code> 로 들어가서 /var/lib/boot2docker/profile 에 아래처럼 추가하면 된다.</p>
<blockquote>
<p>EXTRA_ARGS=”–insecure-registry &lt;your_registry_ip&gt;:5000”</p>
</blockquote>
<p>그런데 맥이나 윈도우의 경우는 docker-machine이 reboot될때마다 셋팅이 없어지기 때문에 아래의 커맨드로 vm을 생성하면 영구적인 변경을 줄 수 있다.</p>
<blockquote>
<p>docker-machine create –driver virtualbox –engine-insecure-registry 10.240.70.80:5000 registry</p>
</blockquote>
<p>vm을 이미 만든 경우라면, ~/.docker/machine/machines/default/config.json의 HostOptions&gt;EngineOptions&gt;InsecureRegistry에 직접 추가해주면 된다. 아래 예 참조. docker 버전은 1.10.0</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">"HostOptions": &#123;</span><br><span class="line">        "Driver": "",</span><br><span class="line">        "Memory": 0,</span><br><span class="line">        "Disk": 0,</span><br><span class="line">        "EngineOptions": &#123;</span><br><span class="line">            "ArbitraryFlags": [],</span><br><span class="line">            "Dns": null,</span><br><span class="line">            "GraphDir": "",</span><br><span class="line">            "Env": [],</span><br><span class="line">            "Ipv6": false,</span><br><span class="line">            "InsecureRegistry": [</span><br><span class="line">                "10.240.70.80:5000"</span><br><span class="line">            ],</span><br><span class="line">            "Labels": [],</span><br><span class="line">            "LogLevel": "",</span><br><span class="line">            "StorageDriver": "",</span><br><span class="line">            "SelinuxEnabled": false,</span><br><span class="line">            "TlsVerify": true,</span><br><span class="line">            "RegistryMirror": [],</span><br><span class="line">            "InstallURL": "https://get.docker.com"</span><br><span class="line">        &#125;,</span><br></pre></td></tr></table></figure>
<h2 id="revision-history"><a href="#revision-history" class="headerlink" title="revision history"></a>revision history</h2><ul>
<li>2016-3-24 draft</li>
<li>2016-5-20 insecure registry 추가</li>
<li>2016-5-31 –net=host 추가</li>
</ul>

      
    </div>

    
      

    

    <footer class="article-footer">
      <a data-url="http://nberserk.github.io/2016/03/02/docker/" data-id="ckqe4m41v000lrcqy3kwyguvt" class="article-share-link">
        <i class="fa fa-share"></i> Share
      </a>
      
        <a href="http://nberserk.github.io/2016/03/02/docker/#disqus_thread" class="article-comment-link">
          <i class="fa fa-comment"></i> Comments
        </a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/docker/" rel="tag">docker</a></li></ul>


    </footer>
  </div>
  
</article>



  
    <article id="post-docker-django" class="article article-type-post" itemscope itemprop="blogPost">

  <header class="article-header">
    
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/02/22/docker-django/">docker로 django개발 환경 만들기</a>
    </h1>
  


  </header>

  <div class="article-meta">
    <div class="article-datetime">
  <a href="/2016/02/22/docker-django/" class="article-date"><time datetime="2016-02-22T15:00:00.000Z" itemprop="datePublished">2016-02-23</time></a>
</div>

    
    

  </div>
  <div class="article-inner">

    <div class="article-entry" itemprop="articleBody">
      
        <p>docker 공홈에 있는 <a href="https://docs.docker.com/compose/django/" target="_blank" rel="noopener">django + postgres 의 예제</a>를 django + mysql로 바꾸어서 해보았다.</p>
<h2 id="mysql"><a href="#mysql" class="headerlink" title="mysql"></a>mysql</h2><p>docker repository <a href="https://hub.docker.com/_/mysql/" target="_blank" rel="noopener">mysql로 검색</a>을 해보면 여러가지가 나오는데 mysql:5.7로 해보자.<br>아래처럼 실행하면 3306 포트로 mysql 데몬이 뜬다.<br><code>docker run -e MYSQL_ROOT_PASSWORD=root mysql:5.7</code></p>
<h2 id="django"><a href="#django" class="headerlink" title="django"></a>django</h2><p>Dockerfile은 아래처럼.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">FROM python:2.7</span><br><span class="line">ENV PYTHONUNBUFFERED 1</span><br><span class="line">RUN mkdir /code</span><br><span class="line">WORKDIR /code</span><br><span class="line">ADD requirements.txt /code/</span><br><span class="line">RUN pip install -r requirements.txt</span><br><span class="line">ADD . /code/</span><br></pre></td></tr></table></figure>
<p>requirements.txt는 아래처럼 작성한다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Django</span><br><span class="line">psycopg2</span><br><span class="line">MySQL-python</span><br></pre></td></tr></table></figure>
<p>이렇게 하면 python:2.7 docker image에 pip로 requirements.txt에 있는 패키지를 설치해서 django ready상태가 되고 호스트의 WORKDIR을 /code로 마운트해서 장고 앱을 실행할 수 있는 상태로 만든다.<br>그 후 아래 명령을 실행하면 장고가 프로젝트 템플릿을 만들어 준다. MyApp 하위에</p>
<p><code>docker-compose run web django-admin.py startproject MyApp .</code></p>
<p>그후 mysql을 연결하는 작업을 해야 하는데 MyApp/settings.py 파일의 DATABASES 부분을 아래처럼 수정.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">DATABASES = &#123;</span><br><span class="line">    <span class="string">'default'</span>: &#123;</span><br><span class="line">        <span class="string">'ENGINE'</span>: <span class="string">'django.db.backends.mysql'</span>,</span><br><span class="line">        <span class="string">'NAME'</span>: <span class="string">'django'</span>,</span><br><span class="line">        <span class="string">'USER'</span>: <span class="string">'django'</span>,</span><br><span class="line">        <span class="string">'PASSWORD'</span>: <span class="string">'django'</span>,</span><br><span class="line">        <span class="string">'HOST'</span>: <span class="string">'db'</span>,</span><br><span class="line">        <span class="string">'PORT'</span>: <span class="number">3306</span>,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="docker-compose"><a href="#docker-compose" class="headerlink" title="docker-compose"></a>docker-compose</h2><p>위에서 mysql container와 django container는 준비가 되었다. 매번 이렇게 2번의 명령으로 컨테이너를 실행하면 번거러울수 있다. 컨테이너가 더 많아질수록 그렇게 될텐데.. 이런 경우를 위해서 docker-compose라는 cli를 제공하고 있다.</p>
<p>아래처럼 docker-compose.yml을 작성하고</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">db:</span><br><span class="line">    image: mysql:5.7</span><br><span class="line">    environment:</span><br><span class="line">    - MYSQL_ROOT_PASSWORD=root</span><br><span class="line">    - MYSQL_DATABASE=django</span><br><span class="line">    - MYSQL_USER=django</span><br><span class="line">    - MYSQL_PASSWORD=django</span><br><span class="line">web:</span><br><span class="line">    build: .</span><br><span class="line">    command: python manage.py runserver 0.0.0.0:8000</span><br><span class="line">    volumes:</span><br><span class="line">        - .:/code</span><br><span class="line">    ports:</span><br><span class="line">        - &quot;8000:8000&quot;</span><br><span class="line">    links:</span><br><span class="line">        - db</span><br></pre></td></tr></table></figure>
<p><code>docker-compose up</code> 명령을 내리면 두개의 docker 컨테이너를 동시에 실행할 수 있다.</p>
<p>잘 동작하는지 확인하려면 <a href="http://localhost:8000" target="_blank" rel="noopener">http://localhost:8000</a> 포트로 접속해보면 된다. 맥이나 윈도우즈의 경우는 <code>docker-machine ip</code> 명령으로 나오는 ip의 8000 로트로 접속해보면 장고 초기화면이 나온다. 나의 경우는 <a href="http://192.168.99.100:8000/" target="_blank" rel="noopener">http://192.168.99.100:8000/</a> 이었다.</p>
<h3 id="revision-history"><a href="#revision-history" class="headerlink" title="revision history"></a>revision history</h3><ul>
<li>2016/2/23 draft</li>
</ul>

      
    </div>

    
      

    

    <footer class="article-footer">
      <a data-url="http://nberserk.github.io/2016/02/22/docker-django/" data-id="ckqe4m41r000krcqy2cvfygjx" class="article-share-link">
        <i class="fa fa-share"></i> Share
      </a>
      
        <a href="http://nberserk.github.io/2016/02/22/docker-django/#disqus_thread" class="article-comment-link">
          <i class="fa fa-comment"></i> Comments
        </a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/docker/" rel="tag">docker</a></li></ul>


    </footer>
  </div>
  
</article>



  
    <article id="post-2016-1-8-hdfsFileMerge" class="article article-type-post" itemscope itemprop="blogPost">

  <header class="article-header">
    
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/01/07/2016-1-8-hdfsFileMerge/">merge sequence file in spark</a>
    </h1>
  


  </header>

  <div class="article-meta">
    <div class="article-datetime">
  <a href="/2016/01/07/2016-1-8-hdfsFileMerge/" class="article-date"><time datetime="2016-01-07T15:00:00.000Z" itemprop="datePublished">2016-01-08</time></a>
</div>

    
    

  </div>
  <div class="article-inner">

    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="merging-sequence-files"><a href="#merging-sequence-files" class="headerlink" title="merging sequence files"></a>merging sequence files</h2><p>spark로 파일을 저장하면 sequence 파일로 저장이 되는데, 이 파일을 합쳐서 하나의 파일로 만들고 싶을때 아래 scala function을 사용하면 된다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">def <span class="title">merge</span><span class="params">(srcPath: String, dstPath: String)</span>: Unit </span>=  &#123;</span><br><span class="line">    <span class="keyword">import</span> org.apache.hadoop.fs.&#123;FileSystem, FileUtil, Path&#125;</span><br><span class="line">    <span class="keyword">import</span> org.apache.hadoop.hdfs.HdfsConfiguration</span><br><span class="line">    <span class="keyword">import</span> org.apache.hadoop.conf.Configuration</span><br><span class="line">    <span class="keyword">import</span> java.net.URI</span><br><span class="line"></span><br><span class="line">    val config = <span class="keyword">new</span> Configuration()</span><br><span class="line">    <span class="comment">//config.set("fs.s3.impl", "org.apache.hadoop.fs.s3.S3FileSystem")</span></span><br><span class="line">    val fs = FileSystem.get( URI.create(srcPath), config)</span><br><span class="line">    FileUtil.copyMerge(fs, <span class="keyword">new</span> Path(srcPath), fs, <span class="keyword">new</span> Path(dstPath), <span class="keyword">false</span>, config, <span class="keyword">null</span>)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h2 id="revision-history"><a href="#revision-history" class="headerlink" title="revision history"></a>revision history</h2><ul>
<li>2016/1/11 initial draft</li>
</ul>

      
    </div>

    
      

    

    <footer class="article-footer">
      <a data-url="http://nberserk.github.io/2016/01/07/2016-1-8-hdfsFileMerge/" data-id="ckqe4m41z000prcqyss286whj" class="article-share-link">
        <i class="fa fa-share"></i> Share
      </a>
      
        <a href="http://nberserk.github.io/2016/01/07/2016-1-8-hdfsFileMerge/#disqus_thread" class="article-comment-link">
          <i class="fa fa-comment"></i> Comments
        </a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/spark/" rel="tag">spark</a></li></ul>


    </footer>
  </div>
  
</article>



  


  <div id="page-nav">
    <nav><ul class="pagination"><li><a class="page-prev" rel="prev" href="/page/7/"><i class="fa fa-chevron-left"></i> Prev</a></li><li><a class="page-number" href="/">1</a></li><li class="disabled"><span class="page-space">&hellip;</span></li><li><a class="page-number" href="/page/6/">6</a></li><li><a class="page-number" href="/page/7/">7</a></li><li class="active"><span class="page-number">8</span></li><li><a class="page-number" href="/page/9/">9</a></li><li><a class="page-number" href="/page/10/">10</a></li><li><a class="page-next" rel="next" href="/page/9/">Next <i class="fa fa-chevron-right"></i></a></li></ul></nav>
  </div>



        </div>
        <div class="col-sm-3 col-sm-offset-1 blog-sidebar">
          
  <div class="sidebar-module sidebar-module-inset">
  <h4>About</h4>
  <p>Etiam porta <em>sem malesuada magna</em> mollis euismod. Cras mattis consectetur purus sit amet fermentum. Aenean lacinia bibendum nulla sed consectetur.</p>

</div>


  
  <div class="sidebar-module">
    <h4>Categories</h4>
    <ul class="sidebar-module-list"><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/categories/algorithm/">algorithm</a><span class="sidebar-module-list-count">5</span></li></ul>
  </div>



  
  <div class="sidebar-module">
    <h4>Tags</h4>
    <ul class="sidebar-module-list" itemprop="keywords"><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/CVA/" rel="tag">CVA</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/algorithm/" rel="tag">algorithm</a><span class="sidebar-module-list-count">15</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/angular/" rel="tag">angular</a><span class="sidebar-module-list-count">6</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/aws/" rel="tag">aws</a><span class="sidebar-module-list-count">5</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/c/" rel="tag">c++</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/checkstyle/" rel="tag">checkstyle</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/cloud-architecture/" rel="tag">cloud architecture</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/coverage/" rel="tag">coverage</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/design/" rel="tag">design</a><span class="sidebar-module-list-count">3</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/django/" rel="tag">django</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/docker/" rel="tag">docker</a><span class="sidebar-module-list-count">5</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/dp/" rel="tag">dp</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/dynamo/" rel="tag">dynamo</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/elasticsearch/" rel="tag">elasticsearch</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/emacs/" rel="tag">emacs</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/emr/" rel="tag">emr</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/fzf/" rel="tag">fzf</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/general/" rel="tag">general</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/gerrit/" rel="tag">gerrit</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/git/" rel="tag">git</a><span class="sidebar-module-list-count">3</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/github/" rel="tag">github</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/google/" rel="tag">google</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/graph/" rel="tag">graph</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/hadoop/" rel="tag">hadoop</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/hexo/" rel="tag">hexo</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/invoke/" rel="tag">invoke</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/jacoco/" rel="tag">jacoco</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/java/" rel="tag">java</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/jekyll/" rel="tag">jekyll</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/jenkins/" rel="tag">jenkins</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/kibana/" rel="tag">kibana</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/mailchimp/" rel="tag">mailchimp</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/maven/" rel="tag">maven</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/mgmt/" rel="tag">mgmt</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/mockito/" rel="tag">mockito</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/mybatis/" rel="tag">mybatis</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/mysql/" rel="tag">mysql</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/nosql/" rel="tag">nosql</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/oauth/" rel="tag">oauth</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/proxy/" rel="tag">proxy</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/rake/" rel="tag">rake</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/regex/" rel="tag">regex</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/rest/" rel="tag">rest</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/ripgrep/" rel="tag">ripgrep</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/ruby/" rel="tag">ruby</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/spark/" rel="tag">spark</a><span class="sidebar-module-list-count">7</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/spring-in-action/" rel="tag">spring in action</a><span class="sidebar-module-list-count">4</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/spring-in-actions/" rel="tag">spring in actions</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/sql/" rel="tag">sql</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/ssh/" rel="tag">ssh</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/swagger/" rel="tag">swagger</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/system-design/" rel="tag">system design</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/template/" rel="tag">template</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/tmux/" rel="tag">tmux</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/tree/" rel="tag">tree</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/vscode/" rel="tag">vscode</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/wordgrep/" rel="tag">wordgrep</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/zeppelin/" rel="tag">zeppelin</a><span class="sidebar-module-list-count">1</span></li></ul>
  </div>



  
  <div class="sidebar-module">
    <h4>Tag Cloud</h4>
    <p class="tagcloud">
      <a href="/tags/CVA/" style="font-size: 10px;">CVA</a> <a href="/tags/algorithm/" style="font-size: 20px;">algorithm</a> <a href="/tags/angular/" style="font-size: 17.14px;">angular</a> <a href="/tags/aws/" style="font-size: 15.71px;">aws</a> <a href="/tags/c/" style="font-size: 10px;">c++</a> <a href="/tags/checkstyle/" style="font-size: 10px;">checkstyle</a> <a href="/tags/cloud-architecture/" style="font-size: 11.43px;">cloud architecture</a> <a href="/tags/coverage/" style="font-size: 10px;">coverage</a> <a href="/tags/design/" style="font-size: 12.86px;">design</a> <a href="/tags/django/" style="font-size: 11.43px;">django</a> <a href="/tags/docker/" style="font-size: 15.71px;">docker</a> <a href="/tags/dp/" style="font-size: 10px;">dp</a> <a href="/tags/dynamo/" style="font-size: 11.43px;">dynamo</a> <a href="/tags/elasticsearch/" style="font-size: 10px;">elasticsearch</a> <a href="/tags/emacs/" style="font-size: 10px;">emacs</a> <a href="/tags/emr/" style="font-size: 11.43px;">emr</a> <a href="/tags/fzf/" style="font-size: 10px;">fzf</a> <a href="/tags/general/" style="font-size: 10px;">general</a> <a href="/tags/gerrit/" style="font-size: 10px;">gerrit</a> <a href="/tags/git/" style="font-size: 12.86px;">git</a> <a href="/tags/github/" style="font-size: 10px;">github</a> <a href="/tags/google/" style="font-size: 10px;">google</a> <a href="/tags/graph/" style="font-size: 10px;">graph</a> <a href="/tags/hadoop/" style="font-size: 10px;">hadoop</a> <a href="/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/tags/invoke/" style="font-size: 10px;">invoke</a> <a href="/tags/jacoco/" style="font-size: 10px;">jacoco</a> <a href="/tags/java/" style="font-size: 10px;">java</a> <a href="/tags/jekyll/" style="font-size: 10px;">jekyll</a> <a href="/tags/jenkins/" style="font-size: 10px;">jenkins</a> <a href="/tags/kibana/" style="font-size: 10px;">kibana</a> <a href="/tags/mailchimp/" style="font-size: 10px;">mailchimp</a> <a href="/tags/maven/" style="font-size: 10px;">maven</a> <a href="/tags/mgmt/" style="font-size: 10px;">mgmt</a> <a href="/tags/mockito/" style="font-size: 10px;">mockito</a> <a href="/tags/mybatis/" style="font-size: 10px;">mybatis</a> <a href="/tags/mysql/" style="font-size: 11.43px;">mysql</a> <a href="/tags/nosql/" style="font-size: 10px;">nosql</a> <a href="/tags/oauth/" style="font-size: 10px;">oauth</a> <a href="/tags/proxy/" style="font-size: 10px;">proxy</a> <a href="/tags/rake/" style="font-size: 10px;">rake</a> <a href="/tags/regex/" style="font-size: 10px;">regex</a> <a href="/tags/rest/" style="font-size: 10px;">rest</a> <a href="/tags/ripgrep/" style="font-size: 10px;">ripgrep</a> <a href="/tags/ruby/" style="font-size: 10px;">ruby</a> <a href="/tags/spark/" style="font-size: 18.57px;">spark</a> <a href="/tags/spring-in-action/" style="font-size: 14.29px;">spring in action</a> <a href="/tags/spring-in-actions/" style="font-size: 10px;">spring in actions</a> <a href="/tags/sql/" style="font-size: 10px;">sql</a> <a href="/tags/ssh/" style="font-size: 11.43px;">ssh</a> <a href="/tags/swagger/" style="font-size: 10px;">swagger</a> <a href="/tags/system-design/" style="font-size: 11.43px;">system design</a> <a href="/tags/template/" style="font-size: 10px;">template</a> <a href="/tags/tmux/" style="font-size: 10px;">tmux</a> <a href="/tags/tree/" style="font-size: 10px;">tree</a> <a href="/tags/vscode/" style="font-size: 10px;">vscode</a> <a href="/tags/wordgrep/" style="font-size: 10px;">wordgrep</a> <a href="/tags/zeppelin/" style="font-size: 10px;">zeppelin</a>
    </p>
  </div>


  
  <div class="sidebar-module">
    <h4>Archives</h4>
    <ul class="sidebar-module-list"><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2021/06/">6월 2021</a><span class="sidebar-module-list-count">5</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2020/09/">9월 2020</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2020/04/">4월 2020</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2019/11/">11월 2019</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2019/08/">8월 2019</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2019/05/">5월 2019</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2019/04/">4월 2019</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2019/02/">2월 2019</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2019/01/">1월 2019</a><span class="sidebar-module-list-count">4</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2018/12/">12월 2018</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2018/11/">11월 2018</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2018/10/">10월 2018</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2018/08/">8월 2018</a><span class="sidebar-module-list-count">4</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2018/07/">7월 2018</a><span class="sidebar-module-list-count">5</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2018/06/">6월 2018</a><span class="sidebar-module-list-count">5</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2018/05/">5월 2018</a><span class="sidebar-module-list-count">4</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2018/04/">4월 2018</a><span class="sidebar-module-list-count">4</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2018/03/">3월 2018</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2018/02/">2월 2018</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2018/01/">1월 2018</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2017/12/">12월 2017</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2017/11/">11월 2017</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2017/10/">10월 2017</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2017/09/">9월 2017</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2017/07/">7월 2017</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2017/03/">3월 2017</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2017/02/">2월 2017</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2016/12/">12월 2016</a><span class="sidebar-module-list-count">3</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2016/11/">11월 2016</a><span class="sidebar-module-list-count">12</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2016/07/">7월 2016</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2016/06/">6월 2016</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2016/04/">4월 2016</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2016/03/">3월 2016</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2016/02/">2월 2016</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2016/01/">1월 2016</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2015/12/">12월 2015</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2015/11/">11월 2015</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2015/10/">10월 2015</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2015/08/">8월 2015</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2015/07/">7월 2015</a><span class="sidebar-module-list-count">4</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2015/06/">6월 2015</a><span class="sidebar-module-list-count">5</span></li></ul>
  </div>



  
  <div class="sidebar-module">
    <h4>Recents</h4>
    <ul class="sidebar-module-list">
      
        <li>
          <a href="/2021/06/26/select-db/">select the right db</a>
        </li>
      
        <li>
          <a href="/2021/06/26/rate-limiter/">Rate limiting service</a>
        </li>
      
        <li>
          <a href="/2021/06/13/top-K-problem/">Top K problem</a>
        </li>
      
        <li>
          <a href="/2021/06/12/distributed-cache/">Design distributed Cache</a>
        </li>
      
        <li>
          <a href="/2021/06/03/distributed-message-queue/">distribute message queue</a>
        </li>
      
    </ul>
  </div>



        </div>
    </div>
  </div>
  <footer class="blog-footer">
  <div class="container">
    <div id="footer-info" class="inner">
      &copy; 2022 @nberserk<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

  
<script>
  var disqus_shortname = 'nberserk';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js" integrity="sha384-8gBf6Y4YYq7Jx97PIqmTwLPin4hxIzQw5aDmUg/DDhul9fFpbbLcLh3nTIIDJKhx" crossorigin="anonymous"></script>

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>




<script src="/js/script.js"></script>


<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</body>
</html>
